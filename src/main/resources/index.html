<!DOCTYPE html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Contracts</title>

    <link href='http://fonts.googleapis.com/css?family=Oleo+Script'
          rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Lobster+Two'
          rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Just+Another+Hand'
          rel='stylesheet' type='text/css'>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.0.3/js.cookie.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.3.14.min.js"></script>
    <script src="/js/amazon-cognito.min.js"></script>
    <script src="/js/base64js.min.js"></script>

    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<!-- Optional theme -->
<!--
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
-->
    <link rel="stylesheet" href="/css/main.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->


    <!--
    <script src="/js/jquery-2.1.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.0.1/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.0.1/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.16/browser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.5/marked.min.js"></script>

    <script src="https://raw.githubusercontent.com/pipwerks/PDFObject/master/pdfobject.min.js"></script>
  -->

    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id" content="784978983695-km7e0k6q09qmrmgk3r2aortu0oqdk2tk.apps.googleusercontent.com">
    <meta name="google-signin-hosted_domain" content="ncf.edu">
    <script src="https://apis.google.com/js/platform.js" async defer></script>

  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <div id="login-area" class="login-area navbar-brand">
      		    <div id="login" class="logged-out">
                <div class="g-signin2" id="my-signin" data-onsuccess="onSignIn" data-onfailure="onSignInFailure"
      				      data-width="240" data-longtitle="true" data-theme="dark">
                </div>
              </div>
      		    <div id="logout" class="logged-in" style="display:none">
      			    <span>
                  Welcome <span class="user-full-name">ANON</span>!
      			      <a href="#" onclick="signOut();" id="logout-link">Sign out</a>
                </span>
      		    </div>
      	  </div>
        </div>
      </div>
    </nav>

    <div id="content"></div>

  <!--
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar">
            <li class="active"><a href="#">Overview <span class="sr-only">(current)</span></a></li>
            <li><a href="#">Reports</a></li>
            <li><a href="#">Analytics</a></li>
            <li><a href="#">Export</a></li>
          </ul>
        </div>

      </div>
    </div>
  -->

    <script>
      var googleUser = null;
      gIdToken = null;

      console.log('hey there!');

      function hideLogout() {
        $(".logged-in").hide();
      }

      function newContract() {
          $(".blank-form").show();
      }

      function signOut() {
        console.log('Signing out ' + googleUser.getBasicProfile().getName());
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.disconnect();
        auth2.signOut().then(function() {
          console.log('User signed out.');
        });
        Cookies.remove("id_token3");
        googleUser = null;
        gIdToken = null;
        $(".logged-in").hide();
        $(".logged-out").show();
      }

      function onSignIn(success) {
        console.log(JSON.stringify({message: "success", value: success}));
        googleUser = success;
        gIdToken = googleUser.getAuthResponse().id_token;
        //Cookies.set('id_token3', googleUser.getAuthResponse().id_token, {expires: 7});
        Cookies.set('id_token3', gIdToken, {expires: 7});

        // Useful data for your client-side scripts:
        var profile = googleUser.getBasicProfile();

        $(".logged-in").show();
        $(".logged-out").hide();

        $(".user-full-name").html(profile.getName());

        // The ID token you need to pass to your backend:
        $("#google_id_token").val(gIdToken);
        //gIdToken = id_token;

        $("#firstName").val(profile.getGivenName());
        $("#lastName").val(profile.getFamilyName());

        $(document).trigger("googleLogin");
        //console.log('login event triggered');

        /*Cookies.remove("id_token2");
        Cookies.remove("test_cookie");
        Cookies.remove("SQLiteManager_currentLangue");
        Cookies.remove("G_AUTHUSER_H");*/
      };

      function onSignInFailure(error) {
        console.log("oops");
        var errorString = "Sorry, something went wrong with the Google sign-in; please let us know about the issue";
        console.log(JSON.stringify({message: "fail", value: error}));
      }
    </script>

    <script src="/js/googleStuff.js"></script>
    <script src="/js/main.js"></script>

  </body>
</html>
